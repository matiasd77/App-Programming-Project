<ion-header>
  <ion-toolbar>
    <ion-title>{{ title }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancel()">Cancel</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="courseForm" (ngSubmit)="onSubmit()">
    <ion-item>
      <ion-label position="stacked">Course Code *</ion-label>
      <ion-input 
        formControlName="code" 
        placeholder="Enter course code (e.g., CS101)"
        type="text">
      </ion-input>
    </ion-item>
    <div class="error-message" *ngIf="courseForm.get('code')?.invalid && courseForm.get('code')?.touched">
      <span *ngIf="courseForm.get('code')?.errors?.['required']">Course code is required</span>
      <span *ngIf="courseForm.get('code')?.errors?.['minlength']">Course code must be at least 2 characters</span>
    </div>

    <ion-item>
      <ion-label position="stacked">Course Title *</ion-label>
      <ion-input 
        formControlName="title" 
        placeholder="Enter course title"
        type="text">
      </ion-input>
    </ion-item>
    <div class="error-message" *ngIf="courseForm.get('title')?.invalid && courseForm.get('title')?.touched">
      <span *ngIf="courseForm.get('title')?.errors?.['required']">Course title is required</span>
      <span *ngIf="courseForm.get('title')?.errors?.['minlength']">Course title must be at least 3 characters</span>
    </div>

    <ion-item>
      <ion-label position="stacked">Description *</ion-label>
      <ion-textarea 
        formControlName="description" 
        placeholder="Enter course description"
        rows="3">
      </ion-textarea>
    </ion-item>
    <div class="error-message" *ngIf="courseForm.get('description')?.invalid && courseForm.get('description')?.touched">
      <span *ngIf="courseForm.get('description')?.errors?.['required']">Description is required</span>
      <span *ngIf="courseForm.get('description')?.errors?.['minlength']">Description must be at least 10 characters</span>
    </div>

    <ion-item>
      <ion-label position="stacked">Year *</ion-label>
      <ion-input 
        formControlName="year" 
        placeholder="Enter year"
        type="number"
        min="2000"
        max="2030">
      </ion-input>
    </ion-item>
    <div class="error-message" *ngIf="courseForm.get('year')?.invalid && courseForm.get('year')?.touched">
      <span *ngIf="courseForm.get('year')?.errors?.['required']">Year is required</span>
      <span *ngIf="courseForm.get('year')?.errors?.['min'] || courseForm.get('year')?.errors?.['max']">Year must be between 2000 and 2030</span>
    </div>

    <div class="form-actions">
      <ion-button 
        type="submit" 
        expand="block" 
        [disabled]="courseForm.invalid || isSubmitting">
        <ion-spinner *ngIf="isSubmitting" name="crescent"></ion-spinner>
        {{ isSubmitting ? 'Saving...' : (isEditMode ? 'Update' : 'Save') }}
      </ion-button>
    </div>
  </form>
</ion-content> 